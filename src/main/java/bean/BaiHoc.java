package bean;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import dao.ConnectDataBase;
import utils.DBUtilsGiaoVien;

/**
 * BaiHoc generated by hbm2java
 */
public class BaiHoc implements java.io.Serializable {

	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	private String maBaiHoc;
	private String khoaHoc;
	private String tenBaiHoc;
	private String moTaNoiDung;
	
	public BaiHoc() {
	}

	public BaiHoc(String maBaiHoc) {
		this.maBaiHoc = maBaiHoc;
	}

	public BaiHoc(String maBaiHoc, String khoaHoc, String tenBaiHoc, String moTaNoiDung) {
		this.maBaiHoc = maBaiHoc;
		this.khoaHoc = khoaHoc;
		this.tenBaiHoc = tenBaiHoc;
		this.moTaNoiDung = moTaNoiDung;
	}
	
	public String autoID(Connection conn) throws SQLException
	{
		String sql = "SELECT COUNT(*) as SoLuong FROM BaiHoc";
		
		PreparedStatement pstm=null;
		try {
			pstm = conn.prepareStatement(sql);
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
        ResultSet rs = pstm.executeQuery();
        String kqString="";
        while (rs.next()) 
        {
        	int soluong = rs.getInt("SoLuong");
        	if (soluong+1<10)
        		kqString= "BH000"+ String.valueOf(soluong+1);
        	else {
				kqString= "BH00"+ String.valueOf(soluong+1);
			}
        }
        return kqString;  
	}
	
	public void addBaiHoc(Connection conn) throws SQLException
	{
		DBUtilsGiaoVien.ThemBaiHoc(conn, this);
	}
	
	public BaiHoc(Connection conn,String khoaHoc, String tenBaiHoc, String moTaNoiDung) throws SQLException {
		this.maBaiHoc = autoID(conn);
		this.khoaHoc = khoaHoc;
		this.tenBaiHoc = tenBaiHoc;
		this.moTaNoiDung = moTaNoiDung;
		addBaiHoc(conn);
		
	}

	public String getMaBaiHoc() {
		return this.maBaiHoc;
	}

	public void setMaBaiHoc(String maBaiHoc) {
		this.maBaiHoc = maBaiHoc;
	}

	public String getKhoaHoc() {
		return this.khoaHoc;
	}

	public void setKhoaHoc(String khoaHoc) {
		this.khoaHoc = khoaHoc;
	}

	public String getTenBaiHoc() {
		return this.tenBaiHoc;
	}

	public void setTenBaiHoc(String tenBaiHoc) {
		this.tenBaiHoc = tenBaiHoc;
	}

	public String getMoTaNoiDung() {
		return this.moTaNoiDung;
	}

	public void setMoTaNoiDung(String moTaNoiDung) {
		this.moTaNoiDung = moTaNoiDung;
	}


}
